<!DOCTYPE HTML>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="application-name" content="Inside My Mind - Kurt Lourens">
    <title>Azure DevOps agent on Ubuntu 22.04 LTS - Inside My Mind</title>

    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">

    <link rel="index" href="https://blog.kurtlourens.com/posts/quickfix-azdo-agent-on-ubuntu-22-lts/">
    <meta name="referrer" content="no-referrer">
    <link rel="manifest" href="/manifest.json">
    <link rel="author" href="/humans.txt">
    <link rel="me" href="mailto:hi@kurtlourens.com">
    <link rel="me" href="https://kurtlourens.com" type="text/html">
    <link rel="search" href="opensearch.xml" type="application/opensearchdescription+xml" title="Search Title">
    <meta name="theme-color" content="#7986cb">
    <meta name="subject" content="How I recently set up an Azure DevOps agent on Ubuntu 22.04. This post describes a workaround for the &quot;No usable version of libssl was found&quot; error message.">
    <meta name="description" content="How I recently set up an Azure DevOps agent on Ubuntu 22.04. This post describes a workaround for the &quot;No usable version of libssl was found&quot; error message.">
    <meta name="rating" content="General">
    <meta name="robots" content="index,follow">

    <!-- Google -->
    <meta name="googlebot" content="index,follow">
    <meta name="google" content="nositelinkssearchbox">
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Apple -->
    <link rel="apple-touch-icon" type="image/png" sizes="x76" href="/assets/favicon/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" type="image/png" sizes="x114" href="/assets/favicon/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" type="image/png" sizes="x120" href="/assets/favicon/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" type="image/png" sizes="x144" href="/assets/favicon/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" type="image/png" sizes="x152" href="/assets/favicon/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="" color="#7986cb">
    <!-- <link rel="apple-touch-startup-image" href="/path/to/launch.png"> -->
    <meta name="apple-mobile-web-app-title" content="Inside My Mind - Kurt Lourens">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="#7986cb">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@AssistantNMS">
    <meta name="twitter:creator" content="@KhaozTopsy">
    <meta name="twitter:url" content="https://blog.kurtlourens.com/posts/quickfix-azdo-agent-on-ubuntu-22-lts/">
    <meta name="twitter:title" content="Inside My Mind - Kurt Lourens">
    <meta name="twitter:description" content="How I recently set up an Azure DevOps agent on Ubuntu 22.04. This post describes a workaround for the &quot;No usable version of libssl was found&quot; error message.">
    <meta name="twitter:image" content="https://blog.kurtlourens.com/posts/quickfix-azdo-agent-on-ubuntu-22-lts/cover.png">
    <meta name="twitter:image:alt" content="Logo of AssistantNMS">

    <!-- Facebook -->
    <meta property="og:url" content="https://blog.kurtlourens.com/posts/quickfix-azdo-agent-on-ubuntu-22-lts/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Inside My Mind">
    <meta property="og:image" content="https://blog.kurtlourens.com/posts/quickfix-azdo-agent-on-ubuntu-22-lts/cover.png">
    <meta property="og:image:alt" content="Logo of AssistantNMS">
    <meta property="og:description" content="How I recently set up an Azure DevOps agent on Ubuntu 22.04. This post describes a workaround for the &quot;No usable version of libssl was found&quot; error message.">
    <meta property="og:site_name" content="Inside My Mind">
    <meta property="og:locale" content="en_UK">
    <meta property="article:author" content="Kurt Lourens">

    <!-- Microsoft -->
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="skype_toolbar" content="skype_toolbar_parser_compatible">
    <meta name="msapplication-config" content="browserconfig.xml">
    <meta name="msapplication-TileColor" content="#7986cb">
    <meta name="msapplication-starturl" content="/?pwa-app" />

    <link rel="preload" as="image" href="/assets/img/loader.svg">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">

    <link href="https://fonts.googleapis.com/css2?family&#x3D;Blinker:wght@100;300;400;600&amp;display&#x3D;swap" rel="stylesheet">

    <link rel="stylesheet" href="/assets/css/bulma.min.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/bulma.dark.min.css">

    <link rel="stylesheet" href="/assets/css/highlight/default.min.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/highlight/atom-one-dark-reasonable.min.css">

    <link rel="stylesheet" href="/assets/css/site.css?v=0.0.25">

    <noscript>
        <link rel="stylesheet" href="/assets/css/noscript.css" />
    </noscript>

    <style>
        :root {
            --blog-font-family: 'Blinker'
        }
    </style>

    <script nonce="schema" type="application/ld+json">{
    "@context": "https://schema.org/",
    "@type": "Person",
    "name": "{{owner.name}}",
    "givenName": "{{owner.name}}",
    "familyName": "{{owner.name}}",
    "additionalName": "{{owner.additionalName}}",
    "url": "{{baseUrl}}",
    "image": "{{owner.image}}",
    "description": "{{meta.description}}",
    "jobTitle": "{{owner.jobTitle}}",
    "owns": [
        {
            "@type": "OwnershipInfo",
            "name": "{{meta.title}}",
            "url": "{{baseUrl}}"
        }
    ]
}</script>
</head>
<body id="blog-body" class="is-loading">
    <nav class="navbar post">
        <div class="navbar-brand">
            <a class="navbar-item" href="/" title="Inside My Mind - Kurt Lourens">
                <img src="/assets/img/logo.png" alt="Inside My Mind - Kurt Lourens" />
            </a>
        </div>
    
        <div class="navbar-menu">
            <div class="navbar-start">
                <div class="navbar-item">
                    Inside My Mind â€” Azure DevOps agent on Ubuntu 22.04 LTS
                </div>
            </div>
        </div>
    
        <div class="progress-wrapper">
            <div class="progress"></div>
        </div>
    </nav>
    <div class="post-wrapper inner">
        <b class="meta">
            <span class="upper-case">12 October 2022
                &nbsp;&nbsp;/&nbsp;&nbsp;QuickFix
            </span>
        </b>
        <h1>Azure DevOps agent on Ubuntu 22.04 LTS</h1>

        <div class="content">
            <div class="cover" style="background-image: url(/posts/quickfix-azdo-agent-on-ubuntu-22-lts/cover.png)"></div>
            <div class="markdown-content">
                <p>I recently tried setting up an Azure DevOps agent on my Ubuntu 22.04 Digital Ocean droplet and got stuck with an error message of <code>No usable version of libssl was found</code>. This is a problem with the Azure DevOps agent, but I did find a workaround and I thought I would share it.</p>
<h3>Workaround</h3>
<p>Download <code>libssl1</code> from security.ubuntu.com</p>
<pre><code class="hljs language-bash">wget 'http://security.ubuntu.com/ubuntu/pool/main/o/openssl/libssl1.1_1.1.1f-1ubuntu2_amd64.deb'
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1719396188083-9474">copy success</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="wget 'http://security.ubuntu.com/ubuntu/pool/main/o/openssl/libssl1.1_1.1.1f-1ubuntu2_amd64.deb'
" data-mdic-attach-content="" data-mdic-notify-id="j-notify-1719396188083-9474" data-mdic-notify-delay="2000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);">copy</button></div></pre>
<p>Install the package</p>
<pre><code class="hljs language-bash">sudo dpkg -i 'libssl1.1_1.1.1f-1ubuntu2_amd64.deb'
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1719396188083-20650">copy success</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="sudo dpkg -i 'libssl1.1_1.1.1f-1ubuntu2_amd64.deb'
" data-mdic-attach-content="" data-mdic-notify-id="j-notify-1719396188083-20650" data-mdic-notify-delay="2000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);">copy</button></div></pre>
<p>Delete the package file</p>
<pre><code class="hljs language-bash">rm 'libssl1.1_1.1.1f-1ubuntu2_amd64.deb'
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1719396188083-42620">copy success</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="rm 'libssl1.1_1.1.1f-1ubuntu2_amd64.deb'
" data-mdic-attach-content="" data-mdic-notify-id="j-notify-1719396188083-42620" data-mdic-notify-delay="2000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);">copy</button></div></pre>
<p>Then run:</p>
<pre><code class="hljs language-bash">sed -i 's/openssl_conf = openssl_init/#openssl_conf = openssl_init/g' /etc/ssl/openssl.cnf
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1719396188083-48915">copy success</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="sed -i 's/openssl_conf = openssl_init/#openssl_conf = openssl_init/g' /etc/ssl/openssl.cnf
" data-mdic-attach-content="" data-mdic-notify-id="j-notify-1719396188083-48915" data-mdic-notify-delay="2000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t='',e='')=>new Promise((c,o)=>{const n=document.createElement('textarea'),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&&t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=>{n.style.display='block',setTimeout(()=>{n.style.display='none'},d)}).catch(()=>{alert(i)})}};e.btnClick(t)}(this);">copy</button></div></pre>
<br />
<p><em>If the above is not working for you, you may need to replace <code>libssl1.1_1.1.1f-1ubuntu2_amd64.deb</code> with a different <code>.deb</code> package which you can find <a href="http://security.ubuntu.com/ubuntu/pool/main/o/openssl/">here</a> and search for <code>libssl1.</code></em></p>
<h3>What is the actual issue?</h3>
<p>It appears that the Azure agent installer makes use of <code>libssl1</code> to communicate with Azure DevOps however the installer does not come with <code>libssl1</code> and Ubuntu 22.04 comes with <code>libssl3</code>. So until the Azure DevOps agent installer is either updated to make use of the later version or comes with a pre-packaged <code>libssl</code>, this workaround will be required.</p>
<h3>Links</h3>
<p><a href="https://github.com/microsoft/azure-pipelines-agent/issues/3834">The issue is tracked and can be found here</a> <br>
<a href="https://studyraft.com/azure-devops-agent-no-usable-version-of-libssl-was-found/">Studyraft blog post about this issue</a></p>

            </div>
        </div>

        <br /><br />

        <div id="disqus_thread"></div>
    </div>

    <a href="/" title="Home" class="post-go-back">&nbsp;ðŸ œ</a>
    <div class="full-page-loader"></div>
    <div class="full-page-loader">
        <img src="/assets/img/loader.svg" draggable="false" alt="loading-animation">
    </div></body>

<script>
    window.config = {
        gtag: 'UA-97325462-3',
        posthog: 'phc_bS84eGionOtpDcJivDn5u3fRL9tvLut3UvGJEekLnvz',
    }
</script>


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-97325462-3"></script>

<script defer src="/assets/js/base.js?v=0.0.25"></script>
<script defer src="/assets/js/analytics.js?v=0.0.25"></script>
<script defer src="/assets/js/scroll.js?v=0.0.25"></script>


<script defer src="/assets/js/highlight.min.js"></script>
<script defer src="/assets/js/hljs-lang/bash.min.js"></script>



<script>
    var disqus_config = function () {
        this.page.url = "https://blog.kurtlourens.com/posts/quickfix-azdo-agent-on-ubuntu-22-lts/posts/quickfix-azdo-agent-on-ubuntu-22-lts";
        this.page.identifier = "quickfix-azdo-agent-on-ubuntu-22-lts";
    };

    (function () {
        var d = document, s = d.createElement('script');
        s.src = 'https://inside-my-mind-v2.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>

</html>