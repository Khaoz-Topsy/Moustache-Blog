<!DOCTYPE HTML>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="application-name" content="Inside My Mind - Kurt Lourens">
    <title>AssistantNMS Incident 2020-03-31 - Inside My Mind</title>

    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">

    <link rel="index" href="https://temp.kurtlourens.com/">
    <link rel="canonical" href="https://temp.kurtlourens.com/">
    <meta name="referrer" content="no-referrer">
    <link rel="manifest" href="/manifest.json">
    <link rel="author" href="/humans.txt">
    <link rel="me" href="mailto:hi@kurtlourens.com">
    <link rel="me" href="https://kurtlourens.com" type="text/html">
    <link rel="search" href="opensearch.xml" type="application/opensearchdescription+xml" title="Search Title">
    <meta name="theme-color" content="#7986cb">
    <meta name="subject" content="This is where I write about my Dev experiences, and anything else I think is worth reading üòÅ">
    <meta name="description" content="This is where I write about my Dev experiences, and anything else I think is worth reading üòÅ">
    <meta name="rating" content="General">
    <meta name="robots" content="index,follow">

    <!-- Google -->
    <meta name="googlebot" content="index,follow">
    <meta name="google" content="nositelinkssearchbox">
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Apple -->
    <link rel="apple-touch-icon" type="image/png" sizes="x76" href="assets/favicon/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" type="image/png" sizes="x114" href="assets/favicon/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" type="image/png" sizes="x120" href="assets/favicon/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" type="image/png" sizes="x144" href="assets/favicon/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" type="image/png" sizes="x152" href="assets/favicon/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="" color="#7986cb">
    <!-- <link rel="apple-touch-startup-image" href="/path/to/launch.png"> -->
    <meta name="apple-mobile-web-app-title" content="Inside My Mind - Kurt Lourens">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="#7986cb">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@AssistantNMS">
    <meta name="twitter:creator" content="@KhaozTopsy">
    <meta name="twitter:url" content="https://temp.kurtlourens.com/">
    <meta name="twitter:title" content="Inside My Mind - Kurt Lourens">
    <meta name="twitter:description" content="This is where I write about my Dev experiences, and anything else I think is worth reading üòÅ">
    <meta name="twitter:image" content="https://nmsassistant.com/assets/img/twitterCard.png">
    <meta name="twitter:image:alt" content="Logo of AssistantNMS">

    <!-- Facebook -->
    <meta property="og:url" content="https://temp.kurtlourens.com/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Inside My Mind">
    <meta property="og:image" content="https://nmsassistant.com/assets/img/twitterCard.png">
    <meta property="og:image:alt" content="Logo of AssistantNMS">
    <meta property="og:description" content="This is where I write about my Dev experiences, and anything else I think is worth reading üòÅ">
    <meta property="og:site_name" content="Inside My Mind">
    <meta property="og:locale" content="en_UK">
    <meta property="article:author" content="Kurt Lourens">

    <!-- Microsoft -->
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="skype_toolbar" content="skype_toolbar_parser_compatible">
    <meta name="msapplication-config" content="browserconfig.xml">
    <meta name="msapplication-TileColor" content="#7986cb">
    <meta name="msapplication-starturl" content="/?pwa-app" />

    <link rel="preload" as="image" href="/assets/img/loader.svg">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">

    <link href="https://fonts.googleapis.com/css2?family&#x3D;Blinker:wght@100;300;400;600&amp;display&#x3D;swap" rel="stylesheet">

    <link rel="stylesheet" href="/assets/css/bulma.min.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/bulma.dark.min.css">

    <link rel="stylesheet" href="/assets/css/highlight/default.min.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/highlight/atom-one-dark-reasonable.min.css">

    <link rel="stylesheet" href="/assets/css/site.css?v=0.0.5">

    <noscript>
        <link rel="stylesheet" href="/assets/css/noscript.css" />
    </noscript>

    <style>
        :root {
            --blog-font-family: 'Blinker'
        }
    </style>

    <script nonce="schema" type="application/ld+json">{
    "@context": "https://schema.org/",
    "@type": "Person",
    "name": "{{owner.name}}",
    "givenName": "{{owner.name}}",
    "familyName": "{{owner.name}}",
    "additionalName": "{{owner.additionalName}}",
    "url": "{{baseUrl}}",
    "image": "{{owner.image}}",
    "description": "{{meta.description}}",
    "jobTitle": "{{owner.jobTitle}}",
    "owns": [
        {
            "@type": "OwnershipInfo",
            "name": "{{meta.title}}",
            "url": "{{baseUrl}}"
        }
    ]
}</script>
</head>
<body id="blog-body" class="is-loading">
    <nav class="navbar post">
        <div class="navbar-brand">
            <a class="navbar-item" href="/">
                <img src="/assets/img/logo.png" alt="Inside My Mind - Kurt Lourens" />
            </a>
        </div>
    
        <div class="navbar-menu">
            <div class="navbar-start">
                <div class="navbar-item">
                    Inside My Mind ‚Äî AssistantNMS Incident 2020-03-31
                </div>
            </div>
        </div>
    
        <div class="progress-wrapper">
            <div class="progress"></div>
        </div>
    </nav>
    <div class="post-wrapper inner">
        <b class="meta">
            <span class="upper-case">31 March 2020
                &nbsp;&nbsp;/&nbsp;&nbsp;Management
            </span>
        </b>
        <h1>AssistantNMS Incident 2020-03-31</h1>

        <div class="content">
            <div class="cover" style="background-image: url(/posts/assistantnms-incident-1/cover.png)"></div>
            <div class="markdown-content">
                <p>Recently I have been adding documentation to the Assistant for No Man's Sky API <a href="https://api.nmsassistant.com">https://api.nmsassistant.com</a>. While I was adding some 'useful' comments and explanations I was also tightening up it's security. I accidentally introduced a bug that broke the 'Likes' and 'Views' on the Guides in the Apps.</p>
<p>I have been hacking away at the Assistant for No Man's Sky tools in the evenings for 8 months at the time of writing this. Even though I have spent a lot of time refactoring and catching up on <a href="https://en.wikipedia.org/wiki/Technical_debt">technical debt</a>, some of the tools' code are a bit of a mess. One of the cleanest parts of the AssistantNMS tools is the API. However while adding features to the API I often neglect to put on the <code>[Authorize]</code> attribute on my Controllers and their methods. This attribute checks that a user is logged in by ensuring that the request has a JWT token being passed in the header, and that it is a valid token. As I was adding documentation to the API, I was making sure that all the Methods that needed Authentication had the <code>[Authorize]</code> attribute. When I can across the <code>/guide/{guid} method</code>, I slapped on the <code>[Authorize]</code> attribute and moved on, that action would cause the following spike in errors.</p>
<p><img src="Spike.png" alt="failed requests"></p>
<blockquote>
<p>A little bit of background, I use Azure Application Insights to track issues on the API. Its easy to install and start tracking things. One thing that could be better is the Azure Portal üòÖ. But I would still recommend using Azure Application Insights, it's free and gives you stack traces from exceptions on Production üëç. You can even connect to and debug Production (I haven't done this yet, but it sounds awesome).</p>
</blockquote>
<p>The <code>/guide/{guid}</code> method is responsible for returning the 'Likes' and 'Views' of a Guide for the specified guid. When I placed the <code>[Authorize]</code> attribute on the method, I was only allowing logged in users to view that data and all requests from the Apps are NOT logged in.</p>
<p>Luckily I like to check Azure App Insights quite regularly and was able to drill down into the errors to see that they were all coming from a specific method. I am also lucky that the API is easy to fix. I don't need to go through an App Store's approval process, I can simply click deploy from within Azure DevOps and a new version is copied over to the server in a few minutes.</p>
<p>On the App-side, users would simply not see the 'Likes' and 'Views' for the Guide they were looking at. I expect that very few users noticed the missing feature as no one reached out to point out the issue. The issue has now been resolved üòÅ.</p>

            </div>
        </div>

    </div>

    <div class="full-page-loader"></div>
    <div class="full-page-loader">
        <img src="/assets/img/loader.svg" draggable="false" alt="loading-animation">
    </div></body>

<script>
    window.config = {
        gtag: ''
    }
</script>



<script defer src="/assets/js/base.js?v=0.0.5"></script>
<script defer src="/assets/js/analytics.js?v=0.0.5"></script>
<script defer src="/assets/js/scroll.js?v=0.0.5"></script>


<script defer src="/assets/js/highlight.min.js"></script>


</html>